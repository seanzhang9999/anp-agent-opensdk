<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ANP SDK 路由和处理器可视化</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { color: #333; }
        h2 { color: #555; margin-top: 30px; }
        .container { display: flex; flex-wrap: wrap; }
        .section { flex: 1; min-width: 300px; margin-right: 20px; }
        .card { border: 1px solid #ddd; border-radius: 5px; padding: 15px; margin-bottom: 15px; background-color: #f9f9f9; }
        .card h3 { margin-top: 0; color: #333; }
        .card p { margin: 5px 0; color: #666; }
        .card .path { font-weight: bold; color: #0066cc; }
        .card .method { display: inline-block; padding: 2px 6px; border-radius: 3px; font-size: 12px; margin-right: 5px; }
        .card .get { background-color: #61affe; color: white; }
        .card .post { background-color: #49cc90; color: white; }
        .card .put { background-color: #fca130; color: white; }
        .card .delete { background-color: #f93e3e; color: white; }
        .card .ws { background-color: #9012fe; color: white; }
        .card .async { font-style: italic; color: #0066cc; }
        .card .doc { font-style: italic; color: #666; margin-top: 5px; }
        .flow-diagram { margin-top: 30px; padding: 20px; border: 1px solid #ddd; border-radius: 5px; }
        .flow-diagram svg { width: 100%; height: auto; }
    </style>
</head>
<body>
    <h1>ANP SDK 路由和处理器可视化</h1>
    
    <div class="container">
        <div class="section">
            <h2>API路由</h2>
            {api_routes_html}
        </div>
        
        <div class="section">
            <h2>消息处理器</h2>
            {message_handlers_html}
        </div>
        
        <div class="section">
            <h2>默认路由</h2>
            {default_routes_html}
        </div>
    </div>
    
    <div class="flow-diagram">
        <h2>消息流程图</h2>
        <svg viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
            <!-- 简单的流程图 -->
            <defs>
                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                    <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
                </marker>
            </defs>
            
            <!-- 客户端 -->
            <rect x="50" y="50" width="120" height="60" rx="5" fill="#f5f5f5" stroke="#333" />
            <text x="110" y="85" text-anchor="middle">客户端</text>
            
            <!-- 服务器 -->
            <rect x="350" y="50" width="120" height="60" rx="5" fill="#f5f5f5" stroke="#333" />
            <text x="410" y="85" text-anchor="middle">服务器</text>
            
            <!-- 消息处理器 -->
            <rect x="650" y="50" width="120" height="60" rx="5" fill="#f5f5f5" stroke="#333" />
            <text x="710" y="85" text-anchor="middle">消息处理器</text>
            
            <!-- HTTP路径 -->
            <rect x="350" y="170" width="120" height="40" rx="5" fill="#61affe" stroke="#333" />
            <text x="410" y="195" text-anchor="middle" fill="white">/api/message</text>
            
            <!-- WebSocket路径 -->
            <rect x="350" y="230" width="120" height="40" rx="5" fill="#9012fe" stroke="#333" />
            <text x="410" y="255" text-anchor="middle" fill="white">/ws/message</text>
            
            <!-- SSE路径 -->
            <rect x="350" y="290" width="120" height="40" rx="5" fill="#49cc90" stroke="#333" />
            <text x="410" y="315" text-anchor="middle" fill="white">/sse/message</text>
            
            <!-- 连接线 -->
            <line x1="170" y1="80" x2="350" y2="80" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
            <line x1="470" y1="80" x2="650" y2="80" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
            
            <line x1="410" y1="110" x2="410" y2="170" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
            <line x1="410" y1="210" x2="410" y2="230" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
            <line x1="410" y1="270" x2="410" y2="290" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
            
            <line x1="470" y1="190" x2="650" y2="90" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
            <line x1="470" y1="250" x2="650" y2="90" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
            <line x1="470" y1="310" x2="650" y2="90" stroke="#333" stroke-width="2" marker-end="url(#arrowhead)" />
            
            <!-- 文本标签 -->
            <text x="260" y="65" text-anchor="middle">发送消息</text>
            <text x="560" y="65" text-anchor="middle">处理消息</text>
        </svg>
    </div>
</body>
</html>